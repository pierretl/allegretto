{% import 'macro.twig' as macro %}



{% set demandeEnAttente = false %}

{% for item in sejours %}
    {% for famille in item.validation %}
        {% if famille.id == session.utilisateur.famille and famille.accord == '' %}
            {% if item.departReel|date("U") > "now"|date("U") %}
                {% set demandeEnAttente = true %}
            {% endif %}
        {% endif %}
    {% endfor %}
{% endfor %}




{% if demandeEnAttente %}
    <div class="cadre-m bg-secondary df fd-c gap-m">
        <h2 class="titre">En attente...</h2>

        <ul class="df fd-c gap-s">
            {% for item in sejours %}
                {% set sejourKey = loop.index %}

                {% for famille in item.validation %}
                    {% if famille.id == session.utilisateur.famille and famille.accord == '' %}
                         {% if item.departReel|date("U") > "now"|date("U") %}

                            {{ macro.cadreSejour({
                                type:                   'aValider',
                                pageRetourValidation:   'dashboard',
                                sejourKey:              sejourKey,
                                titre:                  item.title,
                                dateStart:              item.start,
                                departReel:             item.departReel,
                                commentaire:            item.commentaire,
                                parUtilisateur:         item.parUtilisateur,
                            }) }}

                        {% endif %}
                    {% endif %}
                {% endfor %}

            {% endfor %}
        </ul>
    </div>
{% endif %}